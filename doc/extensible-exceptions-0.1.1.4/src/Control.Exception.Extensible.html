<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 701
</span><span class="hs-pragma">{-# LANGUAGE Trustworthy #-}</span><span class="hs-cpp">
#endif
</span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- | </span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Module      :  Control.Exception</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Copyright   :  (c) The University of Glasgow 2001</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- </span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Maintainer  :  libraries@haskell.org</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Portability :  non-portable (uses ExistentialQuantification and DeriveDataTypeable)</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- This module provides the extensible exceptions API for raising and catching both</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- built-in and user-defined exceptions.</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- </span><span>
</span><span id="line-17"></span><span class="hs-comment">-- For newer versions of GHC (&gt;=6.9), this package re-exports 'Control.Exception'.  </span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Otherwise, it provides a compatibility layer around the previous version of the </span><span>
</span><span id="line-19"></span><span class="hs-comment">-- extensions API.</span><span class="hs-cpp">

#ifdef USE_NEW_EXCEPTIONS
</span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Exception.Extensible</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">blocked</span><span class="hs-special">)</span><span class="hs-cpp">

#else
</span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Exception.Extensible</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-comment">-- * The Exception type</span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-identifier">SomeException</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-identifier">Exception</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-identifier">E.IOException</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-identifier">E.ArithException</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-identifier">E.ArrayException</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-identifier">AssertionFailed</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-identifier">E.AsyncException</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-identifier">NonTermination</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-identifier">NestedAtomically</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-identifier">ExitCode</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-identifier">BlockedOnDeadMVar</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-identifier">BlockedIndefinitely</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-identifier">Deadlock</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-identifier">NoMethodError</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-identifier">PatternMatchFail</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-identifier">RecConError</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-identifier">RecSelError</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-identifier">RecUpdError</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-identifier">ErrorCall</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-comment">-- * Throwing exceptions</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-identifier">throwIO</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-identifier">throw</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-identifier">ioError</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-identifier">throwTo</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-comment">-- * Catching Exceptions</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-comment">-- |There are several functions for catching and examining</span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-comment">-- exceptions; all of them may only be used from within the</span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-comment">-- 'IO' monad.</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-comment">-- ** The @catch@ functions</span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-identifier">catch</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- :: IO a -&gt; (Exception -&gt; IO a) -&gt; IO a</span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-identifier">catches</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Handler</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-identifier">catchJust</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- :: (Exception -&gt; Maybe b) -&gt; IO a -&gt; (b -&gt; IO a) -&gt; IO a</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-comment">-- ** The @handle@ functions</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-identifier">handle</span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- :: (Exception -&gt; IO a) -&gt; IO a -&gt; IO a</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-identifier">handleJust</span><span class="hs-special">,</span><span class="hs-comment">-- :: (Exception -&gt; Maybe b) -&gt; (b -&gt; IO a) -&gt; IO a -&gt; IO a</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-comment">-- ** The @try@ functions</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-identifier">try</span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- :: IO a -&gt; IO (Either Exception a)</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-identifier">tryJust</span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- :: (Exception -&gt; Maybe b) -&gt; a    -&gt; IO (Either b a)</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-identifier">onException</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">-- ** The @evaluate@ function</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-identifier">E.evaluate</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- :: a -&gt; IO a</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-comment">-- ** The @mapException@ function</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-identifier">mapException</span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- :: (Exception -&gt; Exception) -&gt; a -&gt; a</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">-- * Asynchronous Exceptions</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-comment">-- $async</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">-- ** Asynchronous exception control</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- |The following two functions allow a thread to control delivery of</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-comment">-- asynchronous exceptions during a critical region.</span><span>
</span><span id="line-88"></span><span>    </span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-identifier">E.block</span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-identifier">E.unblock</span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">-- *** Applying @block@ to an exception handler</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">-- $block_handler</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-comment">-- *** Interruptible operations</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-comment">-- $interruptible</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- * Assertions</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-identifier">assert</span><span class="hs-special">,</span><span>      </span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">-- * Utilities</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-identifier">bracket</span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-identifier">bracket_</span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-identifier">bracketOnError</span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-identifier">finally</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">catch</span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Concurrent</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">throwTo</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Control.Exception</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">E</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Dynamic</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Typeable</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Exit</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.IO.Unsafe</span><span class="hs-special">(</span><span class="hs-identifier">unsafePerformIO</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Typeable</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-identifier">toException</span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">SomeException</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">SomeException</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">se</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">se</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">Just</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-identifier">mkOldException</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">E.Exception</span><span>
</span><span id="line-137"></span><span class="hs-identifier">mkOldException</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">e'</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-identifier">e'</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-139"></span><span>             </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">e''</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- If the exception is actually a legacy exception</span><span>
</span><span id="line-140"></span><span>                         </span><span class="hs-comment">-- then throw it directly so the legacy functions</span><span>
</span><span id="line-141"></span><span>                         </span><span class="hs-comment">-- catch it as they expect</span><span>
</span><span id="line-142"></span><span>                         </span><span class="hs-identifier">e''</span><span>
</span><span id="line-143"></span><span>             </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Otherwise, throw it as a dynamic</span><span>
</span><span id="line-144"></span><span>                        </span><span class="hs-identifier">E.DynException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toDyn</span><span> </span><span class="hs-identifier">e'</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-identifier">throw</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-147"></span><span class="hs-identifier">throw</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">E.throw</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">mkOldException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-identifier">throwIO</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-150"></span><span class="hs-identifier">throwIO</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">E.throwIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">mkOldException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-identifier">throwTo</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">ThreadId</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-identifier">throwTo</span><span> </span><span class="hs-identifier">tid</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">E.throwTo</span><span> </span><span class="hs-identifier">tid</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">mkOldException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- Catching exceptions</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- |This is the simplest of the exception-catching functions.  It</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- takes a single argument, runs it, and if an exception is raised</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- the \&quot;handler\&quot; is executed, with the value of the exception passed as an</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- argument.  Otherwise, the result is returned as normal.  For example:</span><span>
</span><span id="line-162"></span><span class="hs-comment">--</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- &gt;   catch (openFile f ReadMode)</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- &gt;       (\e -&gt; hPutStr stderr (&quot;Couldn't open &quot;++f++&quot;: &quot; ++ show e))</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- For catching exceptions in pure (non-'IO') expressions, see the</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- function 'evaluate'.</span><span>
</span><span id="line-168"></span><span class="hs-comment">--</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- Note that due to Haskell\'s unspecified evaluation order, an</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- expression may return one of several possible exceptions: consider</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- the expression @error \&quot;urk\&quot; + 1 \`div\` 0@.  Does</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- 'catch' execute the handler passing</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- @ErrorCall \&quot;urk\&quot;@, or @ArithError DivideByZero@?</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- The answer is \&quot;either\&quot;: 'catch' makes a</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- non-deterministic choice about which exception to catch.  If you</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- call it again, you might get a different exception back.  This is</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- ok, because 'catch' is an 'IO' computation.</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- Note that 'catch' catches all types of exceptions, and is generally</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- used for \&quot;cleaning up\&quot; before passing on the exception using</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- 'throwIO'.  It is not good practice to discard the exception and</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- continue, without first checking the type of the exception (it</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- might be a 'ThreadKilled', for example).  In this case it is usually better</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- to use 'catchJust' and select the kinds of exceptions to catch.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- Also note that the &quot;Prelude&quot; also exports a function called</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- 'Prelude.catch' with a similar type to 'Control.Exception.catch',</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- except that the &quot;Prelude&quot; version only catches the IO and user</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- families of exceptions (as required by Haskell 98).</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- We recommend either hiding the &quot;Prelude&quot; version of 'Prelude.catch'</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- when importing &quot;Control.Exception&quot;:</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- &gt; import Prelude hiding (catch)</span><span>
</span><span id="line-196"></span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- or importing &quot;Control.Exception&quot; qualified, to avoid name-clashes:</span><span>
</span><span id="line-198"></span><span class="hs-comment">--</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- &gt; import qualified Control.Exception as C</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- and then using @C.catch@</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-identifier">catch</span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-204"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>         </span><span class="hs-comment">-- ^ The computation to run</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ Handler to invoke if an exception is raised</span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-207"></span><span class="hs-identifier">catch</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-identifier">poly_handler</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">E.catch</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">handler'</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span>
</span><span id="line-209"></span><span>          </span><span class="hs-comment">-- First look for &quot;new style&quot; exceptions, which are thrown</span><span>
</span><span id="line-210"></span><span>          </span><span class="hs-comment">-- as E.DynException (SomeException e)</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>          </span><span class="hs-comment">-- needs scoped TVs: handler' :: E.Exception -&gt; IO a          </span><span>
</span><span id="line-213"></span><span>          </span><span class="hs-identifier">handler'</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-214"></span><span>                           </span><span class="hs-identifier">E.DynException</span><span> </span><span class="hs-identifier">dyn</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-215"></span><span>                               </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fromDynamic</span><span> </span><span class="hs-identifier">dyn</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-216"></span><span>                               </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">se</span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>                                   </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-identifier">se</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-218"></span><span>                                     </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">e'</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">poly_handler</span><span> </span><span class="hs-identifier">e'</span><span>
</span><span id="line-219"></span><span>                                     </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">E.throw</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-220"></span><span>                               </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">try_old</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-221"></span><span>                           </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">try_old</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>          </span><span class="hs-comment">-- If it's a legacy exception (E.Exception or one of the</span><span>
</span><span id="line-224"></span><span>          </span><span class="hs-comment">-- types that make up E.Exception), check for a handler than</span><span>
</span><span id="line-225"></span><span>          </span><span class="hs-comment">-- can handle them:</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span>          </span><span class="hs-comment">-- needs scoped TVs: try_old :: E.Exception -&gt; IO a</span><span>
</span><span id="line-228"></span><span>          </span><span class="hs-identifier">try_old</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-229"></span><span>                       </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">e'</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">poly_handler</span><span> </span><span class="hs-identifier">e'</span><span>
</span><span id="line-230"></span><span>                       </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">E.throw</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | When you want to acquire a resource, do some work with it, and</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- then release the resource, it is a good idea to use 'bracket',</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- because 'bracket' will install the necessary exception handler to</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- release the resource in the event that an exception is raised</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- during the computation.  If an exception is raised, then 'bracket' will</span><span>
</span><span id="line-238"></span><span class="hs-comment">-- re-raise the exception (after performing the release).</span><span>
</span><span id="line-239"></span><span class="hs-comment">--</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- A common example is opening a file:</span><span>
</span><span id="line-241"></span><span class="hs-comment">--</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- &gt; bracket</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- &gt;   (openFile &quot;filename&quot; ReadMode)</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- &gt;   (hClose)</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- &gt;   (\handle -&gt; do { ... })</span><span>
</span><span id="line-246"></span><span class="hs-comment">--</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- The arguments to 'bracket' are in this order so that we can partially apply</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- it, e.g.:</span><span>
</span><span id="line-249"></span><span class="hs-comment">--</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- &gt; withFile name mode = bracket (openFile name mode) hClose</span><span>
</span><span id="line-251"></span><span class="hs-comment">--</span><span>
</span><span id="line-252"></span><span class="hs-identifier">bracket</span><span>
</span><span id="line-253"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>         </span><span class="hs-comment">-- ^ computation to run first (\&quot;acquire resource\&quot;)</span><span>
</span><span id="line-254"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ computation to run last (\&quot;release resource\&quot;)</span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ computation to run in-between</span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span>         </span><span class="hs-comment">-- returns the value from the in-between computation</span><span>
</span><span id="line-257"></span><span class="hs-identifier">bracket</span><span> </span><span class="hs-identifier">before</span><span> </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">thing</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-identifier">E.block</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">before</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-identifier">r</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">E.unblock</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">thing</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">onException</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">r</span><span>
</span><span id="line-263"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-identifier">onException</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-266"></span><span class="hs-identifier">onException</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-identifier">what</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">catch</span><span class="hs-special">`</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-identifier">what</span><span>
</span><span id="line-267"></span><span>                                          </span><span class="hs-identifier">throw</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">SomeException</span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-identifier">block</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">unblock</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-270"></span><span class="hs-identifier">block</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">E.block</span><span>
</span><span id="line-271"></span><span class="hs-identifier">unblock</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">E.unblock</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- | A specialised variant of 'bracket' with just a computation to run</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- afterward.</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="hs-identifier">finally</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>         </span><span class="hs-comment">-- ^ computation to run first</span><span>
</span><span id="line-277"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">b</span><span>         </span><span class="hs-comment">-- ^ computation to run afterward (even if an exception</span><span>
</span><span id="line-278"></span><span>                        </span><span class="hs-comment">-- was raised)</span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>         </span><span class="hs-comment">-- returns the value from the first computation</span><span>
</span><span id="line-280"></span><span class="hs-identifier">a</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">finally</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">sequel</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-identifier">E.block</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-identifier">r</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">E.unblock</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">onException</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">sequel</span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-identifier">sequel</span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">r</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">-- | A variant of 'bracket' where the return value from the first computation</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- is not required.</span><span>
</span><span id="line-289"></span><span class="hs-identifier">bracket_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span>
</span><span id="line-290"></span><span class="hs-identifier">bracket_</span><span> </span><span class="hs-identifier">before</span><span> </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">thing</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">bracket</span><span> </span><span class="hs-identifier">before</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">const</span><span> </span><span class="hs-identifier">after</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">const</span><span> </span><span class="hs-identifier">thing</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- | Like bracket, but only performs the final action if there was an</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- exception raised by the in-between computation.</span><span>
</span><span id="line-294"></span><span class="hs-identifier">bracketOnError</span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>         </span><span class="hs-comment">-- ^ computation to run first (\&quot;acquire resource\&quot;)</span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ computation to run last (\&quot;release resource\&quot;)</span><span>
</span><span id="line-297"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ computation to run in-between</span><span>
</span><span id="line-298"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">c</span><span>         </span><span class="hs-comment">-- returns the value from the in-between computation</span><span>
</span><span id="line-299"></span><span class="hs-identifier">bracketOnError</span><span> </span><span class="hs-identifier">before</span><span> </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">thing</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-identifier">block</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">before</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-identifier">unblock</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">thing</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">onException</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">after</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-identifier">assert</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-306"></span><span class="hs-identifier">assert</span><span> </span><span class="hs-identifier">True</span><span> </span><span class="hs-identifier">x</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">x</span><span>
</span><span id="line-307"></span><span class="hs-identifier">assert</span><span> </span><span class="hs-identifier">False</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">throw</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-string">&quot;&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- | The function 'catchJust' is like 'catch', but it takes an extra</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- argument which is an /exception predicate/, a function which</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- selects which type of exceptions we\'re interested in.</span><span>
</span><span id="line-312"></span><span class="hs-comment">--</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- &gt;   result &lt;- catchJust errorCalls thing_to_try handler</span><span>
</span><span id="line-314"></span><span class="hs-comment">--</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- Any other exceptions which are not matched by the predicate</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- are re-raised, and may be caught by an enclosing</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- 'catch' or 'catchJust'.</span><span>
</span><span id="line-318"></span><span class="hs-identifier">catchJust</span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-320"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- ^ Predicate to select exceptions</span><span>
</span><span id="line-321"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>                   </span><span class="hs-comment">-- ^ Computation to run</span><span>
</span><span id="line-322"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>            </span><span class="hs-comment">-- ^ Handler</span><span>
</span><span id="line-323"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-324"></span><span class="hs-identifier">catchJust</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">handler</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">catch</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">handler'</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="hs-identifier">handler'</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-326"></span><span>                        </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">throw</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-327"></span><span>                        </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">b</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">handler</span><span> </span><span class="hs-identifier">b</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-comment">-- | A version of 'catch' with the arguments swapped around; useful in</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- situations where the code for the handler is shorter.  For example:</span><span>
</span><span id="line-331"></span><span class="hs-comment">--</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- &gt;   do handle (\e -&gt; exitWith (ExitFailure 1)) $</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- &gt;      ...</span><span>
</span><span id="line-334"></span><span class="hs-identifier">handle</span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-335"></span><span class="hs-identifier">handle</span><span>     </span><span class="hs-glyph">=</span><span>  </span><span class="hs-identifier">flip</span><span> </span><span class="hs-identifier">catch</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">-- | A version of 'catchJust' with the arguments swapped around (see</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- 'handle').</span><span>
</span><span id="line-339"></span><span class="hs-identifier">handleJust</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-340"></span><span class="hs-identifier">handleJust</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-identifier">flip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">catchJust</span><span> </span><span class="hs-identifier">p</span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- 'mapException'</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-comment">-- | This function maps one exception into another as proposed in the</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- paper \&quot;A semantics for imprecise exceptions\&quot;.</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-comment">-- Notice that the usage of 'unsafePerformIO' is safe here.</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-identifier">mapException</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e1</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e2</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e1</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">e2</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-351"></span><span class="hs-identifier">mapException</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">unsafePerformIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">catch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.evaluate</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>                                          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">x</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">throw</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">f</span><span> </span><span class="hs-identifier">x</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- 'try' and variations.</span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-comment">-- | Similar to 'catch', but returns an 'Either' result which is</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- @('Right' a)@ if no exception was raised, or @('Left' e)@ if an</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- exception was raised and its value is @e@.</span><span>
</span><span id="line-360"></span><span class="hs-comment">--</span><span>
</span><span id="line-361"></span><span class="hs-comment">-- &gt;  try a = catch (Right `liftM` a) (return . Left)</span><span>
</span><span id="line-362"></span><span class="hs-comment">--</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- Note: as with 'catch', it is only polite to use this variant if you intend</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- to re-throw the exception after performing whatever cleanup is needed.</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- Otherwise, 'tryJust' is generally considered to be better.</span><span>
</span><span id="line-366"></span><span class="hs-comment">--</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- Also note that &quot;System.IO.Error&quot; also exports a function called</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- 'System.IO.Error.try' with a similar type to 'Control.Exception.try',</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- except that it catches only the IO and user families of exceptions</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- (as required by the Haskell 98 @IO@ module).</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-identifier">try</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Either</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span class="hs-identifier">try</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">catch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-operator">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Right</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Left</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- | A variant of 'try' that takes an exception predicate to select</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- which exceptions are caught (c.f. 'catchJust').  If the exception</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- does not match the predicate, it is re-thrown.</span><span>
</span><span id="line-378"></span><span class="hs-identifier">tryJust</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Either</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span class="hs-identifier">tryJust</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-identifier">r</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">try</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">r</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-identifier">Right</span><span> </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Right</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-identifier">Left</span><span>  </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-384"></span><span>                        </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">throw</span><span> </span><span class="hs-identifier">e</span><span>
</span><span id="line-385"></span><span>                        </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">b</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Left</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">Handler</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">Handler</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-identifier">catches</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">Handler</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-395"></span><span class="hs-identifier">catches</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-identifier">handlers</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">io</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">catch</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">catchesHandler</span><span> </span><span class="hs-identifier">handlers</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-identifier">catchesHandler</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">Handler</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">a</span><span>
</span><span id="line-398"></span><span class="hs-identifier">catchesHandler</span><span> </span><span class="hs-identifier">handlers</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">foldr</span><span> </span><span class="hs-identifier">tryHandler</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">throw</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">handlers</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span class="hs-identifier">tryHandler</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Handler</span><span> </span><span class="hs-identifier">handler</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">res</span><span>
</span><span id="line-400"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-401"></span><span>                </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">e'</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">handler</span><span> </span><span class="hs-identifier">e'</span><span>
</span><span id="line-402"></span><span>                </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">res</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- Asynchronous exceptions</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-comment">{- $async

 #AsynchronousExceptions# Asynchronous exceptions are so-called because they arise due to
external influences, and can be raised at any point during execution.
'StackOverflow' and 'HeapOverflow' are two examples of
system-generated asynchronous exceptions.

The primary source of asynchronous exceptions, however, is
'throwTo':

&gt;  throwTo :: ThreadId -&gt; Exception -&gt; IO ()

'throwTo' (also 'throwDynTo' and 'Control.Concurrent.killThread') allows one
running thread to raise an arbitrary exception in another thread.  The
exception is therefore asynchronous with respect to the target thread,
which could be doing anything at the time it receives the exception.
Great care should be taken with asynchronous exceptions; it is all too
easy to introduce race conditions by the over zealous use of
'throwTo'.
-}</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">{- $block_handler
There\'s an implied 'block' around every exception handler in a call
to one of the 'catch' family of functions.  This is because that is
what you want most of the time - it eliminates a common race condition
in starting an exception handler, because there may be no exception
handler on the stack to handle another exception if one arrives
immediately.  If asynchronous exceptions are blocked on entering the
handler, though, we have time to install a new exception handler
before being interrupted.  If this weren\'t the default, one would have
to write something like

&gt;      block (
&gt;           catch (unblock (...))
&gt;                      (\e -&gt; handler)
&gt;      )

If you need to unblock asynchronous exceptions again in the exception
handler, just use 'unblock' as normal.

Note that 'try' and friends /do not/ have a similar default, because
there is no exception handler in this case.  If you want to use 'try'
in an asynchronous-exception-safe way, you will need to use
'block'.
-}</span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-comment">{- $interruptible

Some operations are /interruptible/, which means that they can receive
asynchronous exceptions even in the scope of a 'block'.  Any function
which may itself block is defined as interruptible; this includes
'Control.Concurrent.MVar.takeMVar'
(but not 'Control.Concurrent.MVar.tryTakeMVar'),
and most operations which perform
some I\/O with the outside world.  The reason for having
interruptible operations is so that we can write things like

&gt;      block (
&gt;         a &lt;- takeMVar m
&gt;         catch (unblock (...))
&gt;               (\e -&gt; ...)
&gt;      )

if the 'Control.Concurrent.MVar.takeMVar' was not interruptible,
then this particular
combination could lead to deadlock, because the thread itself would be
blocked in a state where it can\'t receive any asynchronous exceptions.
With 'Control.Concurrent.MVar.takeMVar' interruptible, however, we can be
safe in the knowledge that the thread can receive exceptions right up
until the point when the 'Control.Concurrent.MVar.takeMVar' succeeds.
Similar arguments apply for other interruptible operations like
'System.IO.openFile'.
-}</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- Exception instance for the legacy Exception type</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">E.Exception</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- The new Exception types. These need to map to/from E.Exception so</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- that uses of legacy catch/throw functions work.</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">----</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">E.ArithException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">ae</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ArithException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-497"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ArithException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-498"></span><span>                                         </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ae</span><span>
</span><span id="line-499"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-500"></span><span class="hs-comment">----</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">E.ArrayException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">ae</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ArrayException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-505"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ArrayException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-506"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ae</span><span>
</span><span id="line-507"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span class="hs-comment">----</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.AssertionFailed</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-517"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.AssertionFailed</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-518"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">AssertionFailed</span><span> </span><span class="hs-identifier">err</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">err</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="hs-comment">-----</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">E.AsyncException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">ae</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.AsyncException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-529"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.AsyncException</span><span> </span><span class="hs-identifier">ae</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-530"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ae</span><span>
</span><span id="line-531"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="hs-comment">----</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.BlockedOnDeadMVar</span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-541"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">E.BlockedOnDeadMVar</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-542"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span>
</span><span id="line-543"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-544"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">BlockedOnDeadMVar</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">E.BlockedOnDeadMVar</span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">----</span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">E.BlockedIndefinitely</span><span>
</span><span id="line-554"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-555"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">E.BlockedIndefinitely</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-556"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span>
</span><span id="line-557"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-560"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">BlockedIndefinitely</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">E.BlockedIndefinitely</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="hs-comment">----</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">NestedAtomically</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">NestedAtomically</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-566"></span><span>
</span><span id="line-567"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">NestedAtomically</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">NestedAtomically</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">E.NestedAtomically</span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-570"></span><span>                                    </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">E.NestedAtomically</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-571"></span><span>                                        </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">NestedAtomically</span><span>
</span><span id="line-572"></span><span>                                    </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">NestedAtomically</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">NestedAtomically</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">E.NestedAtomically</span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span class="hs-comment">----</span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">Deadlock</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">Deadlock</span><span>
</span><span id="line-580"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">Deadlock</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">Deadlock</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">E.Deadlock</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-585"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">E.Deadlock</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-586"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">Deadlock</span><span>
</span><span id="line-587"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">Deadlock</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">Deadlock</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">E.Deadlock</span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span class="hs-comment">-----</span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ErrorCall</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-600"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ErrorCall</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-601"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ErrorCall</span><span> </span><span class="hs-identifier">err</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">err</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-comment">-----</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Typeable</span><span> </span><span class="hs-identifier">ExitCode</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-610"></span><span>    </span><span class="hs-identifier">typeOf</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mkTyConApp</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">mkTyCon</span><span> </span><span class="hs-string">&quot;ExitCode&quot;</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">ExitCode</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-613"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">ee</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ExitException</span><span> </span><span class="hs-identifier">ee</span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-615"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.ExitException</span><span> </span><span class="hs-identifier">ee</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-616"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ee</span><span>
</span><span id="line-617"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-618"></span><span class="hs-comment">-----</span><span>
</span><span id="line-619"></span><span>
</span><span id="line-620"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">E.IOException</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-621"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">ioe</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.IOException</span><span> </span><span class="hs-identifier">ioe</span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-623"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.IOException</span><span> </span><span class="hs-identifier">ioe</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-624"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ioe</span><span>
</span><span id="line-625"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="hs-comment">----</span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-630"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.NoMethodError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-635"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.NoMethodError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-636"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">NoMethodError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">str</span><span>
</span><span id="line-641"></span><span>
</span><span id="line-642"></span><span class="hs-comment">----</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">NonTermination</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">NonTermination</span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">NonTermination</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-648"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">NonTermination</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-identifier">E.NonTermination</span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-650"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">E.NonTermination</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-651"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">NonTermination</span><span>
</span><span id="line-652"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">NonTermination</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-655"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">NonTermination</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">E.NonTermination</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-comment">----</span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-663"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.PatternMatchFail</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-665"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.PatternMatchFail</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PatternMatchFail</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">str</span><span>
</span><span id="line-671"></span><span>    </span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span class="hs-comment">----</span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-676"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-679"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecConError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-681"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecConError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecConError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">str</span><span>
</span><span id="line-687"></span><span>    </span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-comment">----</span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-693"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-696"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecSelError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-698"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecSelError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-699"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-703"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecSelError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">str</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="hs-comment">----</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-identifier">String</span><span>
</span><span id="line-708"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier">Typeable</span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Exception</span><span> </span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-711"></span><span>    </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecUpdError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-identifier">fromException</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SomeException</span><span> </span><span class="hs-identifier">e</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">cast</span><span> </span><span class="hs-identifier">e</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-713"></span><span>                                      </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">E.RecUpdError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-714"></span><span>                                          </span><span class="hs-identifier">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>                                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Show</span><span> </span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-718"></span><span>    </span><span class="hs-identifier">showsPrec</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">RecUpdError</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">showString</span><span> </span><span class="hs-identifier">str</span><span class="hs-cpp">


#endif
</span><span>
</span><span id="line-723"></span></pre></body></html>